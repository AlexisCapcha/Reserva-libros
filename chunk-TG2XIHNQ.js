import{Ba as v,Fa as h,L as f,N as r,Q as d,Qa as E,R as g,Sa as _,V as s,Za as S,aa as c,ab as I,ba as n,ca as e,da as b,db as D,eb as y,gb as w,ia as p,oa as x,ra as t,sa as u,ta as m}from"./chunk-ZGKWI5GO.js";var C=o=>["/prestamo",o];function M(o,a){o&1&&(n(0,"div",16),t(1," No disponible "),e())}function j(o,a){if(o&1&&(n(0,"button",17),t(1," Solicitar pr\xE9stamo "),e()),o&2){let i=p(2);c("routerLink",v(2,C,i.libro.slug))("disabled",i.contarDisponibles()===0)}}function O(o,a){o&1&&(n(0,"button",18),t(1," Inicie sesi\xF3n para solicitar "),e())}function P(o,a){if(o&1&&(n(0,"div",8)(1,"div",9),b(2,"img",10),s(3,M,2,0,"div",11),e(),n(4,"h5",12),t(5),e(),n(6,"p",13)(7,"strong"),t(8,"Autor:"),e(),t(9),e(),n(10,"p",13)(11,"strong"),t(12,"Fecha de publicaci\xF3n:"),e(),t(13),e(),n(14,"p",13)(15,"strong"),t(16,"Editorial:"),e(),t(17),e(),n(18,"p",14)(19,"strong"),t(20,"ISBN:"),e(),t(21),e(),s(22,j,2,4,"button",15)(23,O,2,0,"ng-template",null,0,h),e()),o&2){let i=x(24),l=p();r(2),c("src",l.libro.imagenUrl,f)("alt",l.libro.titulo),r(),c("ngIf",l.contarDisponibles()===0),r(2),u(l.libro.titulo),r(4),m(" ",l.libro.autor),r(4),m(" ",l.libro.fechaPublicacion),r(4),m(" ",l.libro.editorial),r(4),m(" ",l.libro.isbn),r(),c("ngIf",l.authService.isAuthenticated())("ngIfElse",i)}}function L(o,a){if(o&1&&(n(0,"div",19)(1,"h5",20),t(2,"Descripci\xF3n"),e(),n(3,"p",21),t(4),e(),n(5,"p",13)(6,"strong"),t(7,"Genero: "),e(),n(8,"span",22),t(9),e()(),n(10,"h5",20),t(11,"Disponibilidad"),e(),n(12,"div",23)(13,"p",24)(14,"strong"),t(15,"Ejemplares disponibles:"),e(),t(16),e(),b(17,"div",25),e()()),o&2){let i=p();r(4),m(" ",i.libro.descripcion," "),r(5),u(i.libro.genero),r(7),m(" ",i.contarDisponibles()," ")}}var k=class o{constructor(a,i,l){this.route=a;this.librosService=i;this.authService=l}libro=null;ejemplares=[];ngOnInit(){let a=this.route.snapshot.paramMap.get("slug");a&&this.librosService.getDetallePorSlug(a).subscribe({next:i=>{this.libro=i.libro,this.ejemplares=i.ejemplaresDisponibles},error:i=>console.error("Error cargando libro",i)})}contarDisponibles(){return this.libro?this.libro.ejemplares?.filter(a=>a.estado==="DISPONIBLE").length??0:0}static \u0275fac=function(i){return new(i||o)(d(S),d(y),d(w))};static \u0275cmp=g({type:o,selectors:[["app-detalle"]],decls:9,vars:2,consts:[["loginButton",""],[1,"container","my-5"],["routerLink","/catalogo",1,"btn","btn-danger","btn-sm"],[1,"mb-4","fw-bold"],[1,"book-detail"],[1,"row"],["class","col-md-4 text-center mb-4 mb-md-0",4,"ngIf"],["class","col-md-8",4,"ngIf"],[1,"col-md-4","text-center","mb-4","mb-md-0"],[1,"position-relative","d-inline-block"],[1,"book-image","mb-3",3,"src","alt"],["class",`position-absolute top-0 start-0 w-100 h-100 bg-dark bg-opacity-75
            d-flex align-items-center justify-content-center text-white fw-bold fs-6`,4,"ngIf"],[1,"fw-bold"],[1,"mb-1"],[1,"mb-3"],["class","btn btn-purple w-100",3,"routerLink","disabled",4,"ngIf","ngIfElse"],[1,"position-absolute","top-0","start-0","w-100","h-100","bg-dark","bg-opacity-75","d-flex","align-items-center","justify-content-center","text-white","fw-bold","fs-6"],[1,"btn","btn-purple","w-100",3,"routerLink","disabled"],["type","button","data-bs-toggle","modal","data-bs-target","#loginModal",1,"btn","btn-purple","w-100"],[1,"col-md-8"],[1,"section-title"],[2,"text-align","justify"],[1,"btn","btn-info"],[1,"form-check","mb-2"],[1,"text-muted","ms-3"],[1,"mt-3"]],template:function(i,l){i&1&&(n(0,"div",1)(1,"a",2),t(2," Volver al Cat\xE1logo "),e(),n(3,"h2",3),t(4,"Detalle libro"),e(),n(5,"div",4)(6,"div",5),s(7,P,25,10,"div",6)(8,L,18,3,"div",7),e()()()),i&2&&(r(7),c("ngIf",l.libro),r(),c("ngIf",l.libro))},dependencies:[_,E,D,I],styles:[".book-detail[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:2rem;box-shadow:0 0 10px #0000000d}.book-image[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px}.btn-purple[_ngcontent-%COMP%]{background-color:#6c2bd9;color:#fff;font-weight:700}.btn-purple[_ngcontent-%COMP%]:hover{background-color:#5a1cc3}.form-check-label[_ngcontent-%COMP%]{font-weight:500}.section-title[_ngcontent-%COMP%]{font-weight:600;margin-top:2rem}"]})};export{k as a};
