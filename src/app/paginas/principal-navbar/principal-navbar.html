<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<header>
  <nav class="navbar navbar-expand-lg bg-body-tertiary custom-navbar">
    <div class="container-fluid custom-container">
      <a class="navbar-brand custom-navbar-brand" routerLink="">
        <img src="logonav.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top custom-logo">
      </a>

      <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon custom-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse custom-collapse" id="navbarNav">
        <ul class="navbar-nav custom-nav-list">
          <li class="nav-item custom-nav-item">
            <a class="nav-link custom-nav-link" routerLink="">Inicio</a>
          </li>
          <li class="nav-item custom-nav-item">
            <a class="nav-link custom-nav-link" routerLink="catalogo">Catálogo</a>
          </li>
          <li class="nav-item custom-nav-item">
            <a class="nav-link custom-nav-link" routerLink="eventos">Eventos y Actividades</a>
          </li>
        </ul>
      </div>
    </div>


    <!-- Modal de Login -->
    <div class="modal fade" id="loginModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
      aria-labelledby="loginModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">

          <div class="modal-header">
            <h1 class="modal-title fs-5" id="loginModalLabel">Iniciar sesión</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>

          <!-- Formulario Angular Reactivo -->
          <div class="modal-body">
            <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
              <div class="mb-3">
                <label for="username" class="form-label">Correo electrónico</label>
                <input type="email" class="form-control" id="username" formControlName="username"
                  placeholder="usuario@correo.com" required />
              </div>

              <div class="mb-3">
                <label for="password" class="form-label">Contraseña</label>
                <input type="password" class="form-control" id="password" formControlName="password"
                  placeholder="Ingrese su contraseña" required />
              </div>

              <div *ngIf="loginError" class="alert alert-danger mt-2">
                {{ loginError }}
              </div>

              <div class="text-end">
                <button type="submit" class="btn btn-primary" [disabled]="loginForm.invalid">Ingresar</button>
              </div>
            </form>
          </div>

          <div class="modal-footer">
            <a class="btn btn-secondary" [routerLink]="['/registrar']">Registrar</a>
          </div>

        </div>
      </div>
    </div>

    <!-- Mostrar si NO está autenticado -->
      <button *ngIf="!usuarioAutenticado" type="button" class="btn btn-primary boton-login" data-bs-toggle="modal"
        data-bs-target="#loginModal">
        <i class="bi bi-person-circle icono-login"></i>
      </button>

    <!-- Mostrar si SÍ está autenticado -->
    <div *ngIf="usuarioAutenticado" class="nav-item dropdown boton-login2">
      <a class="nav-link dropdown-toggle btn btn-outline-primary p-3" href="#" role="button" data-bs-toggle="dropdown"
        aria-expanded="false">
        <i class="bi bi-person-check-fill"></i>
        <span class="ms-1">Mi Cuenta</span>
      </a>
      <ul class="dropdown-menu dropdown-menu-end">
        <li>
          <a class="dropdown-item" [routerLink]="['/cuenta']">
            <i class="bi bi-person-gear me-2"></i>Ver Mi Cuenta
          </a>
        </li>
        <li>
          <hr class="dropdown-divider" />
        </li>
        <li>
          <a class="dropdown-item" (click)="logout()">
            <i class="bi bi-box-arrow-left me-2"></i>Cerrar Sesión
          </a>
        </li>
      </ul>
    </div>

  </nav>

</header>

<router-outlet></router-outlet>

<footer>
  <nav class="navbar navbar-expand-lg custom-footer">
    <div class="container">
      <div class="row w-100">
        <!-- Columna 1 -->
        <div class="col-md-6 d-flex flex-column align-items-md-center align-items-center footer-columna-izquierda">
          <img src="logofo.png" alt="Logo Municipalidad de Ate" class="footer-logo mb-2">
          <span class="footer-texto text-center">
            &copy; Todos los derechos reservados a la Municipalidad de Ate
          </span>
        </div>

        <!-- Columna 2 -->
        <div
          class="col-md-6 d-flex justify-content-center justify-content-md-end align-items-center footer-columna-derecha">
          <ul class="navbar-nav footer-enlaces align-items-center">
            <li class="nav-item">
              <a class="nav-link footer-link" href="tel:+51987654321">
                <i class="bi bi-telephone-fill text-center"></i> Teléfono: +51 987 654 321
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link footer-link text-center" href="mailto:contacto@municipalidadate.gob.pe">
                <i class="bi bi-envelope-fill text-center"></i> contactomunicipalidadate.gob.pe
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link footer-link text-center" href="https://goo.gl/maps/ate" target="_blank">
                <i class="bi bi-geo-alt-fill text-center"></i> Av. Principal 123, Ate, Lima
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
</footer>